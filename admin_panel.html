<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sophia Bot - Admin Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .header h1 {
            color: #667eea;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #666;
            font-size: 14px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #667eea, #764ba2);
        }

        .stat-card.critical::before {
            background: linear-gradient(180deg, #f093fb, #f5576c);
        }

        .stat-card.success::before {
            background: linear-gradient(180deg, #4facfe, #00f2fe);
        }

        .stat-card.warning::before {
            background: linear-gradient(180deg, #ffd89b, #19547b);
        }

        .stat-label {
            font-size: 13px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .stat-change {
            font-size: 13px;
            color: #4CAF50;
        }

        .stat-change.negative {
            color: #f44336;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .chart-card h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 18px;
        }

        .table-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .table-card h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 18px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #f5f5f5;
            padding: 12px;
            text-align: left;
            font-size: 13px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        td {
            padding: 15px 12px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
        }

        tr:hover {
            background: #f9f9f9;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge.hot {
            background: #ffebee;
            color: #f44336;
        }

        .badge.warm {
            background: #fff3e0;
            color: #ff9800;
        }

        .badge.cold {
            background: #e3f2fd;
            color: #2196f3;
        }

        .badge.blocked {
            background: #f5f5f5;
            color: #999;
        }

        .refresh-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
            transition: all 0.3s;
        }

        .refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(102, 126, 234, 0.4);
        }

        .alert {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert.danger {
            background: #f8d7da;
            border-left-color: #dc3545;
        }

        .alert.success {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .insights {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .insight-item {
            padding: 15px;
            border-left: 3px solid #667eea;
            margin-bottom: 15px;
            background: #f9f9f9;
            border-radius: 5px;
        }

        .insight-item strong {
            color: #667eea;
        }

        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .metric-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .mini-metric {
            flex: 1;
            background: #f9f9f9;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .mini-metric-label {
            font-size: 11px;
            color: #888;
            margin-bottom: 5px;
        }

        .mini-metric-value {
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî• Sophia Bot - Dashboard Admin</h1>
            <p class="subtitle">Vers√£o 8.2 - Anti-Spam Fix | √öltima atualiza√ß√£o: <span id="lastUpdate">Carregando...</span></p>
            <button class="refresh-btn" onclick="loadAllData()">
                <span id="refreshIcon">üîÑ</span> Atualizar Dados
            </button>
        </div>

        <div id="alerts"></div>

        <!-- KPIs Principais -->
        <div class="stats-grid">
            <div class="stat-card critical">
                <div class="stat-label">Taxa de Convers√£o VIP</div>
                <div class="stat-value" id="conversionRate">--%</div>
                <div class="stat-change" id="conversionChange">Carregando...</div>
                <div class="metric-group">
                    <div class="mini-metric">
                        <div class="mini-metric-label">Clicaram</div>
                        <div class="mini-metric-value" id="clickedVip">--</div>
                    </div>
                    <div class="mini-metric">
                        <div class="mini-metric-label">Viram Teaser</div>
                        <div class="mini-metric-value" id="sawTeaser">--</div>
                    </div>
                </div>
            </div>

            <div class="stat-card success">
                <div class="stat-label">Usu√°rios Ativos</div>
                <div class="stat-value" id="totalUsers">--</div>
                <div class="stat-change" id="userGrowth">Carregando...</div>
                <div class="metric-group">
                    <div class="mini-metric">
                        <div class="mini-metric-label">Hoje</div>
                        <div class="mini-metric-value" id="activeToday">--</div>
                    </div>
                    <div class="mini-metric">
                        <div class="mini-metric-label">Esta Semana</div>
                        <div class="mini-metric-value" id="activeWeek">--</div>
                    </div>
                </div>
            </div>

            <div class="stat-card warning">
                <div class="stat-label">Engajamento M√©dio</div>
                <div class="stat-value" id="avgEngagement">--</div>
                <div class="stat-change" id="engagementChange">Carregando...</div>
                <div class="metric-group">
                    <div class="mini-metric">
                        <div class="mini-metric-label">Msgs/Usu√°rio</div>
                        <div class="mini-metric-value" id="msgsPerUser">--</div>
                    </div>
                    <div class="mini-metric">
                        <div class="mini-metric-label">Streak M√©dio</div>
                        <div class="mini-metric-value" id="avgStreak">--</div>
                    </div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-label">Em Cooldown</div>
                <div class="stat-value" id="cooldownUsers">--</div>
                <div class="stat-change" id="cooldownPercent">Carregando...</div>
                <div class="metric-group">
                    <div class="mini-metric">
                        <div class="mini-metric-label">Rejeitaram VIP</div>
                        <div class="mini-metric-value" id="rejectedVip">--</div>
                    </div>
                    <div class="mini-metric">
                        <div class="mini-metric-label">Ign orados</div>
                        <div class="mini-metric-value" id="ignored">--</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Insights Autom√°ticos -->
        <div class="insights">
            <h3>üí° Insights Autom√°ticos (IA)</h3>
            <div id="aiInsights">
                <p style="color: #888;">Analisando dados...</p>
            </div>
        </div>

        <!-- Gr√°ficos -->
        <div class="charts-grid">
            <div class="chart-card">
                <h3>üìä Funil de Convers√£o</h3>
                <canvas id="funnelChart"></canvas>
            </div>

            <div class="chart-card">
                <h3>üìà Atividade dos √öltimos 7 Dias</h3>
                <canvas id="activityChart"></canvas>
            </div>

            <div class="chart-card">
                <h3>üî• N√≠vel de Interesse (√öltimas 24h)</h3>
                <canvas id="interestChart"></canvas>
            </div>

            <div class="chart-card">
                <h3>‚è∞ Ofertas VIP por Hor√°rio</h3>
                <canvas id="hourlyChart"></canvas>
            </div>
        </div>

        <!-- Top Usu√°rios -->
        <div class="table-card">
            <h3>üë• Top 20 Usu√°rios Mais Engajados</h3>
            <table id="topUsersTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>User ID</th>
                        <th>Mensagens</th>
                        <th>Streak</th>
                        <th>Teasers Vistos</th>
                        <th>√öltima Atividade</th>
                        <th>Status</th>
                        <th>Interesse</th>
                    </tr>
                </thead>
                <tbody id="topUsersBody">
                    <tr><td colspan="8" style="text-align: center; color: #888;">Carregando...</td></tr>
                </tbody>
            </table>
        </div>

        <!-- Usu√°rios em Cooldown -->
        <div class="table-card">
            <h3>üö´ Usu√°rios em Cooldown (Rejeitaram VIP)</h3>
            <table id="cooldownTable">
                <thead>
                    <tr>
                        <th>User ID</th>
                        <th>Msgs Restantes no Cooldown</th>
                        <th>Ofertas VIP Hoje</th>
                        <th>Total de Teasers Vistos</th>
                        <th>√öltimo Contato</th>
                    </tr>
                </thead>
                <tbody id="cooldownBody">
                    <tr><td colspan="5" style="text-align: center; color: #888;">Carregando...</td></tr>
                </tbody>
            </table>
        </div>

        <!-- An√°lise de Performance -->
        <div class="table-card">
            <h3>üìâ An√°lise de Drop-off (Onde os leads param?)</h3>
            <table>
                <thead>
                    <tr>
                        <th>Est√°gio</th>
                        <th>Usu√°rios</th>
                        <th>% do Total</th>
                        <th>Drop Rate</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="dropoffBody">
                    <tr><td colspan="5" style="text-align: center; color: #888;">Carregando...</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let charts = {};

        // Verifica autentica√ß√£o
        const adminToken = localStorage.getItem('adminToken');
        if (!adminToken) {
            window.location.href = '/admin/login';
        }

        // Adiciona bot√£o de logout
        document.querySelector('.header').innerHTML += `
            <button class="refresh-btn" onclick="logout()" style="background: #f44336; margin-left: 10px;">
                üö™ Sair
            </button>
        `;

        function logout() {
            localStorage.removeItem('adminToken');
            window.location.href = '/admin/login';
        }

        async function loadAllData() {
            const refreshIcon = document.getElementById('refreshIcon');
            refreshIcon.innerHTML = '<span class="loader"></span>';

            try {
                // Busca dados REAIS da API
                const response = await fetch('/admin/stats', {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.status === 401) {
                    // Token inv√°lido
                    localStorage.removeItem('adminToken');
                    window.location.href = '/admin/login';
                    return;
                }

                if (!response.ok) {
                    throw new Error('Erro ao carregar dados');
                }

                const data = await response.json();
                
                // Se a API retornar dados reais, use-os
                // Sen√£o, usa mock data para desenvolvimento

                updateKPIs(data);
                updateCharts(data);
                updateTables(data);
                generateAIInsights(data);
                updateAlerts(data);

                document.getElementById('lastUpdate').textContent = new Date().toLocaleString('pt-BR');
            } catch (error) {
                console.error('Erro ao carregar dados:', error);
                showAlert('Erro ao carregar dados do dashboard', 'danger');
            } finally {
                refreshIcon.innerHTML = 'üîÑ';
            }
        }

        function updateKPIs(data) {
            // Taxa de Convers√£o
            const conversionRate = data.stats.sawTeaser > 0 
                ? (data.stats.clickedVip / data.stats.sawTeaser * 100).toFixed(1)
                : 0;
            document.getElementById('conversionRate').textContent = `${conversionRate}%`;
            document.getElementById('conversionChange').textContent = 
                `${data.stats.clickedVip} de ${data.stats.sawTeaser} converteram`;
            document.getElementById('clickedVip').textContent = data.stats.clickedVip;
            document.getElementById('sawTeaser').textContent = data.stats.sawTeaser;

            // Usu√°rios Ativos
            document.getElementById('totalUsers').textContent = data.stats.totalUsers;
            document.getElementById('userGrowth').textContent = `+${data.stats.newUsers24h} nas √∫ltimas 24h`;
            document.getElementById('activeToday').textContent = data.stats.activeToday;
            document.getElementById('activeWeek').textContent = data.stats.activeWeek;

            // Engajamento
            const avgMsgs = (data.stats.totalMessages / data.stats.totalUsers).toFixed(1);
            document.getElementById('avgEngagement').textContent = `${avgMsgs} msgs`;
            document.getElementById('msgsPerUser').textContent = avgMsgs;
            document.getElementById('avgStreak').textContent = `${data.stats.avgStreak} dias`;

            // Cooldown
            document.getElementById('cooldownUsers').textContent = data.stats.inCooldown;
            const cooldownPercent = (data.stats.inCooldown / data.stats.totalUsers * 100).toFixed(1);
            document.getElementById('cooldownPercent').textContent = `${cooldownPercent}% do total`;
            document.getElementById('rejectedVip').textContent = data.stats.rejectedVip;
            document.getElementById('ignored').textContent = data.stats.ignored;
        }

        function updateCharts(data) {
            // Funil de Convers√£o
            if (charts.funnel) charts.funnel.destroy();
            const funnelCtx = document.getElementById('funnelChart').getContext('2d');
            charts.funnel = new Chart(funnelCtx, {
                type: 'bar',
                data: {
                    labels: ['Iniciaram', '1¬™ Mensagem', 'Viram Teaser', 'Clicaram VIP'],
                    datasets: [{
                        label: 'Usu√°rios',
                        data: [
                            data.funnel.started,
                            data.funnel.firstMessage,
                            data.funnel.sawTeaser,
                            data.funnel.clickedVip
                        ],
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(118, 75, 162, 0.8)',
                            'rgba(240, 147, 251, 0.8)',
                            'rgba(245, 87, 108, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });

            // Atividade 7 dias
            if (charts.activity) charts.activity.destroy();
            const activityCtx = document.getElementById('activityChart').getContext('2d');
            charts.activity = new Chart(activityCtx, {
                type: 'line',
                data: {
                    labels: data.activity.labels,
                    datasets: [{
                        label: 'Mensagens',
                        data: data.activity.messages,
                        borderColor: 'rgba(102, 126, 234, 1)',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    }
                }
            });

            // N√≠vel de Interesse
            if (charts.interest) charts.interest.destroy();
            const interestCtx = document.getElementById('interestChart').getContext('2d');
            charts.interest = new Chart(interestCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Alto', 'M√©dio', 'Baixo'],
                    datasets: [{
                        data: [data.interest.high, data.interest.medium, data.interest.low],
                        backgroundColor: [
                            'rgba(245, 87, 108, 0.8)',
                            'rgba(255, 152, 0, 0.8)',
                            'rgba(33, 150, 243, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true
                }
            });

            // Ofertas por Hor√°rio
            if (charts.hourly) charts.hourly.destroy();
            const hourlyCtx = document.getElementById('hourlyChart').getContext('2d');
            charts.hourly = new Chart(hourlyCtx, {
                type: 'line',
                data: {
                    labels: data.hourly.labels,
                    datasets: [{
                        label: 'Ofertas VIP',
                        data: data.hourly.offers,
                        borderColor: 'rgba(118, 75, 162, 1)',
                        backgroundColor: 'rgba(118, 75, 162, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        function updateTables(data) {
            // Top Usu√°rios
            const topUsersBody = document.getElementById('topUsersBody');
            topUsersBody.innerHTML = data.topUsers.map((user, index) => `
                <tr>
                    <td>${index + 1}</td>
                    <td>${user.id}</td>
                    <td>${user.messages}</td>
                    <td>${user.streak} üî•</td>
                    <td>${user.teasers}</td>
                    <td>${user.lastActivity}</td>
                    <td><span class="badge ${user.status}">${user.statusText}</span></td>
                    <td><span class="badge ${user.interest}">${user.interestText}</span></td>
                </tr>
            `).join('');

            // Cooldown
            const cooldownBody = document.getElementById('cooldownBody');
            if (data.cooldownUsers.length === 0) {
                cooldownBody.innerHTML = '<tr><td colspan="5" style="text-align: center; color: #888;">Nenhum usu√°rio em cooldown</td></tr>';
            } else {
                cooldownBody.innerHTML = data.cooldownUsers.map(user => `
                    <tr>
                        <td>${user.id}</td>
                        <td>${user.cooldownRemaining} msgs</td>
                        <td>${user.offersToday}</td>
                        <td>${user.totalTeasers}</td>
                        <td>${user.lastContact}</td>
                    </tr>
                `).join('');
            }

            // Drop-off
            const dropoffBody = document.getElementById('dropoffBody');
            dropoffBody.innerHTML = data.dropoff.map(stage => `
                <tr>
                    <td>${stage.name}</td>
                    <td>${stage.users}</td>
                    <td>${stage.percent}%</td>
                    <td><span class="badge ${stage.dropClass}">${stage.dropRate}%</span></td>
                    <td>${stage.status}</td>
                </tr>
            `).join('');
        }

        function generateAIInsights(data) {
            const insights = [];

            // An√°lise de convers√£o
            const conversionRate = (data.stats.clickedVip / data.stats.sawTeaser * 100);
            if (conversionRate < 10) {
                insights.push(`<strong>‚ö†Ô∏è Taxa de convers√£o BAIXA (${conversionRate.toFixed(1)}%)</strong> - Considere: melhorar urg√™ncia, testar novos teasers, ou ajustar timing das ofertas.`);
            } else if (conversionRate > 25) {
                insights.push(`<strong>üéØ Taxa de convers√£o EXCELENTE (${conversionRate.toFixed(1)}%)</strong> - Continue com essa estrat√©gia! Considere aumentar tr√°fego.`);
            }

            // An√°lise de cooldown
            const cooldownRate = (data.stats.inCooldown / data.stats.totalUsers * 100);
            if (cooldownRate > 30) {
                insights.push(`<strong>üö® ${cooldownRate.toFixed(1)}% dos usu√°rios em cooldown</strong> - Bot pode estar sendo muito insistente. Considere aumentar o intervalo entre ofertas.`);
            }

            // An√°lise de engajamento
            const avgMsgs = data.stats.totalMessages / data.stats.totalUsers;
            if (avgMsgs < 5) {
                insights.push(`<strong>üìâ Engajamento BAIXO (${avgMsgs.toFixed(1)} msgs/usu√°rio)</strong> - Usu√°rios abandonam r√°pido. Melhore as respostas da IA ou o onboarding.`);
            } else if (avgMsgs > 15) {
                insights.push(`<strong>üî• Engajamento ALTO (${avgMsgs.toFixed(1)} msgs/usu√°rio)</strong> - Usu√°rios est√£o muito engajados! √ìtimo sinal de product-market fit.`);
            }

            // An√°lise de hor√°rios
            const bestHour = data.hourly.offers.indexOf(Math.max(...data.hourly.offers));
            insights.push(`<strong>‚è∞ Melhor hor√°rio:</strong> ${data.hourly.labels[bestHour]} - Concentre esfor√ßos de marketing nesse per√≠odo.`);

            // An√°lise de drop-off
            const biggestDrop = data.dropoff.reduce((max, stage) => 
                parseFloat(stage.dropRate) > parseFloat(max.dropRate) ? stage : max
            );
            if (parseFloat(biggestDrop.dropRate) > 50) {
                insights.push(`<strong>‚ö†Ô∏è Maior drop-off: ${biggestDrop.name} (${biggestDrop.dropRate}%)</strong> - Foque em melhorar essa etapa do funil.`);
            }

            const insightsDiv = document.getElementById('aiInsights');
            insightsDiv.innerHTML = insights.map(i => `<div class="insight-item">${i}</div>`).join('');
        }

        function updateAlerts(data) {
            const alertsDiv = document.getElementById('alerts');
            const alerts = [];

            // Alertas cr√≠ticos
            if (data.stats.clickedVip === 0) {
                alerts.push('<div class="alert danger"><strong>üö® CR√çTICO:</strong> Nenhuma convers√£o VIP ainda! Verifique se o link do canal est√° correto.</div>');
            }

            const conversionRate = (data.stats.clickedVip / data.stats.sawTeaser * 100);
            if (conversionRate < 5 && data.stats.sawTeaser > 20) {
                alerts.push('<div class="alert danger"><strong>‚ö†Ô∏è ATEN√á√ÉO:</strong> Taxa de convers√£o muito baixa. Considere revisar a oferta VIP ou os teasers.</div>');
            }

            if (data.stats.activeToday < data.stats.totalUsers * 0.1) {
                alerts.push('<div class="alert"><strong>üìâ ALERTA:</strong> Poucos usu√°rios ativos hoje. Considere enviar mensagens de reengajamento.</div>');
            }

            alertsDiv.innerHTML = alerts.join('');
        }

        function showAlert(message, type = 'warning') {
            const alertsDiv = document.getElementById('alerts');
            const alert = document.createElement('div');
            alert.className = `alert ${type}`;
            alert.innerHTML = `<strong>‚ö†Ô∏è</strong> ${message}`;
            alertsDiv.appendChild(alert);
            setTimeout(() => alert.remove(), 5000);
        }

        // MOCK DATA - SUBSTITUA PELA SUA API REAL
        function generateMockData() {
            return {
                stats: {
                    totalUsers: 1247,
                    newUsers24h: 183,
                    activeToday: 421,
                    activeWeek: 876,
                    sawTeaser: 543,
                    clickedVip: 87,
                    totalMessages: 18934,
                    avgStreak: 3.2,
                    inCooldown: 124,
                    rejectedVip: 89,
                    ignored: 35
                },
                funnel: {
                    started: 1247,
                    firstMessage: 1089,
                    sawTeaser: 543,
                    clickedVip: 87
                },
                activity: {
                    labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b', 'Dom'],
                    messages: [2340, 2890, 3120, 2750, 3450, 2980, 2100]
                },
                interest: {
                    high: 234,
                    medium: 512,
                    low: 501
                },
                hourly: {
                    labels: ['0h', '2h', '4h', '6h', '8h', '10h', '12h', '14h', '16h', '18h', '20h', '22h'],
                    offers: [12, 8, 5, 7, 15, 23, 34, 45, 56, 67, 78, 54]
                },
                topUsers: Array.from({length: 20}, (_, i) => ({
                    id: 1000000 + Math.floor(Math.random() * 1000000),
                    messages: Math.floor(Math.random() * 100) + 20,
                    streak: Math.floor(Math.random() * 10),
                    teasers: Math.floor(Math.random() * 5),
                    lastActivity: `${Math.floor(Math.random() * 24)}h atr√°s`,
                    status: ['hot', 'warm', 'cold'][Math.floor(Math.random() * 3)],
                    statusText: ['üî• Quente', 'üòä Morno', '‚ùÑÔ∏è Frio'][Math.floor(Math.random() * 3)],
                    interest: ['hot', 'warm', 'cold'][Math.floor(Math.random() * 3)],
                    interestText: ['Alto', 'M√©dio', 'Baixo'][Math.floor(Math.random() * 3)]
                })),
                cooldownUsers: Array.from({length: 5}, (_, i) => ({
                    id: 2000000 + Math.floor(Math.random() * 1000000),
                    cooldownRemaining: Math.floor(Math.random() * 8) + 1,
                    offersToday: Math.floor(Math.random() * 3) + 1,
                    totalTeasers: Math.floor(Math.random() * 5) + 1,
                    lastContact: `${Math.floor(Math.random() * 12)}h atr√°s`
                })),
                dropoff: [
                    { name: 'Start ‚Üí 1¬™ Msg', users: 158, percent: 12.7, dropRate: '12.7', dropClass: 'warm', status: '‚úÖ Normal' },
                    { name: '1¬™ Msg ‚Üí Teaser', users: 546, percent: 50.1, dropRate: '50.1', dropClass: 'hot', status: '‚ö†Ô∏è Alto' },
                    { name: 'Teaser ‚Üí Clique VIP', users: 456, percent: 84.0, dropRate: '84.0', dropClass: 'hot', status: 'üö® Cr√≠tico' }
                ]
            };
        }

        // Auto-refresh a cada 30 segundos
        setInterval(loadAllData, 30000);

        // Carregar dados na inicializa√ß√£o
        loadAllData();
    </script>
</body>
</html>
